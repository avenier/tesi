\documentclass[12pt,a4paper,twoside,openright,english]{book}
\input{style.tex}
\input{glossary.tex}

\title{\myTitle}
\author{\myName}
\date{\today}

\begin{document}

%**************************************************************
% Cover
%**************************************************************
\frontmatter
\begin{titlepage}
	\begin{center}
		\vbox to40pt{\vbox to\textheight{\vfill {\transparent{0.2}\includegraphics[width=10cm]{logo-unipd.png}} \vfill}}
	\end{center}
	\begin{minipage}{.20\textwidth}
		\includegraphics[height=2cm]{logo-department.png}
	\end{minipage}
	\hspace{40pt}
	\begin{minipage}{.80\textwidth}
		\begin{center}
			\begin{LARGE}
				\textsc{\textbf{\myUni}}\\
			\end{LARGE}
			\line(1,0){220}\\
			\begin{Large}
				\textsc{\myDepartment}\\
			\end{Large}
		\end{center}
	\end{minipage}
	\begin{center}
		\vfill
		\large{\textsc{\myDegree}}\\			
		\LARGE{\textsc{\textbf{\myTitle}}}\\
		\large{\mySubTitle}\\
		\vfill
		\begin{minipage}{0.4\textwidth}
			\begin{flushleft} \large
				\emph{Autore}\\
				\myName
			\end{flushleft}
		\end{minipage}
		\hfill
		\begin{minipage}{0.4\textwidth}
			\begin{flushright} \large
				\emph{Relatore} \\
				\myProf
			\end{flushright}
		\end{minipage}
		\vfill
		\line(1, 0){338} \\
		\begin{normalsize}
			\textsc{Anno Accademico \myAA}
		\end{normalsize}
	\end{center}
\end{titlepage}

%**************************************************************
% Colophon
%**************************************************************
\thispagestyle{empty}
\hfill
\vfill
\noindent \myName\ \textit{\myTitle,} \myDegree, Copyright \textcopyright\ \myTime.

\cleardoublepage
%\begingroup\onehalfspacing


%**************************************************************
% Keywords
%**************************************************************
\chapter*{Keywords}\label{keywords}
\paragraph*{CRM}
sta per \textit{Customer relationship management} e rappresenta un approccio per gestire le interazioni di un azienda con i suoi clienti, attuali e potenziali.\\
Attraverso questa metodologia si punta a raccogliere e analizzare i dati relativi ai cliente (email, sito aziendale, numeri telefonici ed in particolar modo lo storico delle offerte e degli ordini effettuati) con il fine di incrementare le vendite grazie alla fidelizzazione dello stesso mediante offerte e sconti mirati.\\
Seguendo questi concetti sono nati, e si sono affermati, diversi software CRM e tra i maggiori esponenti possiamo trovare: \textbf{Salesforce} e \textbf{Microsoft Dynamics}.\\
L'azienda \large{\myCompany{}}, basandosi sull'importanza e sulla diffusione dei suddetti software ha deciso di integrarli nella propria applicazione web di \textit{Project Management}.
 
\paragraph*{Project Management Software}
La disciplina di \textit{Project Management} si occupa di sovraintendere la pianificazione, l'organizzazione e l'implementazione di un progetto. Dove con progetto si intende un insieme ordinato di compiti da svolgere, caratterizzati da: vincoli di tempo (date di inizio e fine), risorse utilizzabili e risultati attesi.\\
Questa disciplina è fondamentale per controllare i costi, l'utilizzo delle risorse aziendali e per poter assicurare che il prodotto finale di questi processi soddisfi a pieno le esigenze del cliente.\\
In questo contesto \large{\myCompany{}} ha deciso di sviluppare \textbf{ADProject}, una soluzione software pensata ad-hoc per i propri clienti con l'obbiettivo di facilitare e automatizzare il suddetto insieme di attività.

%**************************************************************
% Abstract
%**************************************************************
\chapter*{Abstract}\label{abstract}
Questa tesi è basata sull'esperienza di stage che ho svolto presso l'azienda \textbf{Athesys s.r.l.}.
L’azienda \textbf{Athesys s.r.l.} ha costruito un software gestionale di Project Management, chiamato ADProject, che va ad integrare e ampliare le funzionalità di Microsoft Project, fornendo ai clienti la possibilità di avere un programma customizzato in base alle loro esigenze. ADProject permette di avere una panoramica costantemente aggiornata dei progetti presenti e passati dell’azienda, consente di spostare e assegnare risorse su determinati task di progetto, rendicontare il lavoro svolto dal personale ed inoltre di tenere sotto controllo i costi e le scadenze. Il progetto di stage consta nel costruire un modulo software che vada ad ampliare le funzionalità fornite da ADProject attraverso l’integrazione con Salesforce. In questo modo con ADProject si riusciranno a fornire, non solo strumenti all’avanguardia per la gestione di progetto, ma si potranno avere dati costantemente aggiornati relativi ai clienti dell’azienda, facilitando la gestione con gli stessi e permettendo inoltre la loro fidelizzazione grazie a rapporti e trattamenti aziendali mirati.

%**************************************************************
% Table of contents, list of figures and list of tables
%**************************************************************
\tableofcontents
\listoffigures
\listoftables

\mainmatter

%**************************************************************
% Introduzione
%**************************************************************
\chapter{Il Progetto}\label{introduzione}
	\section{Scopo del progetto}
	Il progetto, per quanto stabilito nel piano di lavoro dello stage, comporta l'integrazione di \textit{ADProject} con \textit{Salesforce} ma, dato che la parte principale dell'applicazione è stata finita con 2 settimane di anticipo, si è deciso di integrare nel servizio \textit{\textbf{ADCrm}} anche un secondo CRM: \textit{\textbf{Microsoft Dynamics}}.
	Nei successivi capitoli verrà descritta l'integrazione con entrambi i sistemi e verranno spiegate le sfide riscontrate in questo progetto, tuttavia per evitare eccessive ripetizioni ci si concentrerà soprattutto sulle parti riguardanti \textit{\textbf{SalesForce}}.
	\section{Studio delle applicazioni CRM}
		\subsection{Autenticazione}
			Per avere l'accesso ai dati l'applicazione deve potersi autenticare presso i server di SalesForce e Dynamics ed entrambe le applicazioie permettono l'autenticazione attraverso protocollo OAuth2.0.
			\paragraph{OAuth2.0}
			E' un protocollo aperto che permettere, in maniera semplice e standard, di autenticare e autorizzare applicazioni web, mobile e desktop ad accedere ai dati che si vogliono esporre. Viene comunemente usato come un modo per autorizzare siti web o applicazioni ad accedere ad altri siti senza fornire direttamente le credenziali dell'utente.\\
			La scelta di questo protocollo è stata obbligata, dato che è l'unico metodo d'autenticazione esposto dai CRM, tuttavia è un ottima opzione in quanto permette di rendere più sicuro il sistema, limitando la quantità di dati sensibili salvati all'interno dell'applicazione; inoltre sgrava il sistema dalle procedure di cambio password dato che sono a carico del \glo{provider} OAuth (SalesForce e Dynamics).
			%TODO: da ricontrollare
			\paragraph{Authentication Flow}
			%In questo paragrafo viene descritta la 
		\subsection{Protocolli di interrogazione}
			Entrambi i CRM permettono l'interrogazione dei propri dati attraverso l'implementazione di protocolli \textit{REST-based}. Questi offrono anche la possibilità di mettere in relazioni dati differenti, in maniera simile al comportamento della clausola \glo{JOIN} per le \glo{query} \glo{SQL}, anche se con limitazioni.\\ 
			La sfida che si è presentata in quest'ambito è stata quella di trovare il modo migliore di recuperare tutti i dati necessari limitando al più possibile il numero di richieste http inviate ai CRM, in quanto ogni nuova richiesta effettuata aumenta il tempo di re-indirizzamento dei dati recuperati verso ADProject.
			SalesForce e Microsoft Dynamics sfruttano due protocolli molto diversi tra di loro:
			%TODO: migliorare
			\paragraph{SOQL}
			o \textit{\textbf{S}alesforce \textbf{O}bject \textbf{Q}uery \textbf{L}anguage} permette recuperare i della propria organizzazione da SalesForce. SOQL è basato su richieste http ad uno specifico \glo{endpoint}, al cui url viene accodata una \glo{query} simile a quelle formulate nel linguaggio \glo{SQL}. In caso di richiesta corretta, Il CRM risponde con i dati richiesti in formato \glo{JSON}.
			\paragraph{OData}
			E' un protocollo aperto (Open Data Protocol) creato da Microsoft, che definisce un insieme di best-practices per costruire e utilizzare API RESTful.\\
			Dynamics permette l'interrogazione dei propri dati attraverso semplici richieste http basate su questo protocollo, dando in risposta i dati richiesti in formato \glo{JSON}.
			
			
%**************************************************************
% Tecnologie e Strumenti
%**************************************************************
\chapter{Tecnologie e Strumenti}\label{tecnologie}
\section{Frameworks e linguaggi di programmazione}
In questa sezione verranno descritti brevemente i linguaggi di programmazione usati nella scrittura di \textbf{ADProject} e di \textbf{ADCrm}.
Non tutti i linguaggi che verranno presentati in seguito sono stati usati nell'ambito del progetto di stage (in quanto limitato alla realizzazione del servizio \large{ADCrm}), tuttavia la loro contestualizzazione all'interno dei vari moduli sviluppati dall'azienda aiuta a capire meglio il funzionamento degli stessi.

\paragraph{.NET Framework}
è un \glo{framework} software sviluppato da Microsoft. Include una vasta classe di librerie chiamata \textit{Framework Class Library} (FLC) che permette l'interoperabilità tra i linguaggi di programmazione del \glo{framework}. I programmi scritti per .NET vengono eseguiti in un ambiente software conosciuto come \textit{Common Language Runtime} (CLR), una \textit{virtual machine}  che fornisce servizi come la gestione delle eccezioni e la gestione della memoria. FCL e CLR insieme costituisco .NET.\\
Il software di project management \textbf{ADProject} e il modulo \textbf{ADCrm} sono sviluppati su questo \glo{framework}.
%TODO da incrementare questa parte o specificarla meglio

\paragraph{ASP.NET}
 è un \glo{framework} server-side, sviluppato da Microsoft, per la creazione di applicazioni web, che permette ai programmatori di costruire pagine dinamiche, applicazioni e web services.
 ASP.NET viene usato per lo sviluppo di tutte le pagine web dinamiche che fungono da interfacce grafiche per ADProject.

\paragraph{Visual Basic .NET}
è un linguaggio di programmazione orientato agli oggetti sviluppato su .NET.\\
Con questo linguaggio è stato sviluppato ADProject, e sono tuttora in sviluppo numerosi moduli di questo software. La motivazione principale che ha portato i developers assegnati al progetto a scegliere questo linguaggio è stata la loro familiarità con lo stesso. 

\paragraph{C\#}
è un linguaggio di programmazione orientato agli oggetti sviluppato su .NET.
La sintassi del linguaggio prende spunto da C++ , da Java
e da Visual Basic.
Questo linguaggio sta alla base di tutto lo sviluppo del microservice ADCrm,soggetto di questa tesi. La scelta si potrebbe pensare poco sensata in quanto ADCrm deve integrarsi con un applicazione web interamente scritta con Visual Basic .NET, tuttavia ci sono delle forti motivazioni che hanno fatto propendere il team di sviluppo ad adottare questo linguaggio:
\begin{itemize}
	\item avendo scelto di adottare una struttura basata su microservices per lo sviluppo di ADCrm, ed essendo quindi un modulo fisicamente slegato da ADProject, è possibile scegliere un linguaggio di programmazione differente da VB.NET, pur rimanendo all'interno dei linguaggi offerti dal \glo{framework};
	\item i programmatori assegnati allo sviluppo del progetto hanno maggiore familiarità con questo linguaggio;
	\item C\# ha una vastissima comunity e mediamente è più facile reperire documentazione e teamplate rispetto a VB.NET;
	\item è più probabile trovare futuri developer C\#, in caso di incremento e manutenzione di ADCrm.	
\end{itemize}

\section{Ambiente di sviluppo}
\paragraph{Visual Studio}
 è un potente l'ambiente di sviluppo multipiattaforma fornito da Microsoft ed è stata la scelta naturale per lo sviluppo di ogni componente di ADProject ed ADCrm.
Visual Studio supporta, oltre ai linguaggi e \glo{framework} sopracitati: C, C++, F\#, Html e Javascript. 
%TODO da specificare cosa vuol dire multipiattaforma

\chapter{Analisi}\label{analisi}

%**************************************************************
% Casi d'uso
%**************************************************************
\section{Casi d'uso}\label{usecase}
%TODO: da aggiungere alla tabella dei casi d'uso le precondizioni da ricontrollare le immagini se sbordano e da controllare se aggiungere testo all'inizio di questa sezione
I casi d'uso sono creati secondo lo standard UML 2.4 e sono identificati dalla seguente notazione:
\begin{center}
	UC[Codice]: [Titolo]
\end{center}
dove il \textbf{codice} è un numero progressivo identificativo di ogni requisito, gerarchico nel  caso di sotto-casi d'uso tramite la notazione \textit{CodiceUCPadre.CodiceSottoUC}. Per ogni caso d'uso deve inoltre essere indicato:
\begin{itemize}
	\item \textbf{Titolo:} breve ma non ambiguo
	\item \textbf{Attori:} principali e secondari coinvolti
	\item \textbf{Descrizione:} una descrizione sintetica del caso d'uso
	%\item \textbf{Precondizione:} condizione necessaria affinché il caso d'uso possa avvenire
	\item \textbf{Flusso principale degli eventi:} descrizione, eventualmente per punti, del main scenario del Caso d'uso
	\item \textbf{Postcondizione:} condizione del sistema dopo che il caso d'uso è avvenuto
\end{itemize}
\begin{small}
\input{useCase.tex}
\end{small}





%**************************************************************
% Requisiti
%**************************************************************
\section{Requisiti}\label{requisiti}
Ogni requisito dovrà essere classificato per tipo e importanza, utilizzando la seguente struttura:
\begin{center}
	R[importanza][tipo][codice]
\end{center}
\begin{itemize}
	\item \textbf{Importanza} può assumere i seguenti valori:
	\begin{description}
		\item[1:] requisito desiderabile
		\item[2:] requisito opzionale
		\item[3:] requisito obbligatorio
	\end{description}
	\item \textbf{Tipo} può assumere i seguenti valori:
	\begin{description}
		\item[F:] Funzionale, descrive i servizi o le funzioni offerte dal sistema
		\item[Q:] Di Qualità, descrive i requisiti sulla qualità offerte dal sistema
		\item[P:] Prestazionale, descrive i requisiti sulle prestazioni offerte dal sistema
		\item[V:] Vincolo, descrive i vincoli sui servizi offerti dal sistema
	\end{description}
	\item \textbf{Codice} è un numero progressivo univoco per ogni requisito, indipendente da importanza e tipo. Nel caso si abbia un sotto-requisito codice può anche essere espresso in modo gerarchico tramite la notazione:
	\begin{center}
		\textit{CodiceRequistoPadre.CodiceSottorequisito}
	\end{center}
\end{itemize}
%Ogni requisito deve essere correlato da una sintetica ma precisa descrizione. Per ogni requisito bisogna indicarne le fonti, che posso essere il capitolato o uno o più casi d'uso.
%TODO: da controllare tutto e da controllare se aggiungere testo all'inizio di questa sezione
\begin{small}
\input{requirements.tex}
\end{small}
%**************************************************************
% Progettazione
%**************************************************************
\chapter{Progettazione}\label{progettazione}
In questo capitolo viene dettagliatamente descritta l'applicazione, presentando: 
\begin{enumerate}
	\itemsep-1em 
	\item I \glo{Design Pattern} utilizzati, contestualizzando il loro utilizzo;
	\item La descrizione dell'architettura ad alto livello del sistema;
	\item Le \glo{API} REST esposte per permettere al client di comunicare con l'applicazione;
	\item Una descrizione più dettagliata delle classi che rappresentano il cuore dell'applicazione.
\end{enumerate}

\section{Design pattern}\label{design_pattern}
\subsection{Microservices}
Lo stile architetturale a microservizi è un approccio per sviluppare una singola applicazione come un insieme di piccoli servizi autonomi che interagiscono tra di loro, ognuno dei quali gestisce i suoi processi e comunica attraverso meccanismi snelli, spesso \glo{API} http.
Questa architettura permette di velocizzare i tempi di sviluppo (essendo i servizi autonomi tra di loro essi possono raggiungere l'ambiente di produzione anche in momenti separati ed inoltre possono essere sviluppati da persone diverse), aumentare la resilienza del sistema (se uno dei servizi smette di funzionare essendo separato dagli altri, non pregiudica il funzionamento del sistema) ed è più facilmente scalabile rispetto ad un architettura monolitica.\\
Si è deciso di sviluppare ADCrm seguendo quest'ottica, ottenendo in questo modo:
\begin{itemize}
	\item una netta separazione dei compiti delle varie componenti del sistema;
	\item la possibilità di collegarsi a nuovi CRM senza dover modificare in alcun modo ADProject, in quanto esso comunica con il servizio attraverso un interfaccia comune;
	\item un aumento  della resilienza e la scalabilità dell'applicazione.
\end{itemize}


\subsection{RESTful}
REST o \textit{\textbf{Re}presentational \textbf{S}tate \textbf{T}ransfer} è un architettura software che permette di rendere interoperabili sistemi di computer attraverso internet. 
Un servizio web REST permette ai sistemi richiedenti, di accedere e manipolare una rappresentazione testuale delle sue risorse web attraverso un insieme predefinito di operazioni \glo{stateless}.
Utilizzare i metodi definiti per il protocollo http (GET, POST, PUT, DELETE) è il modo più comune accedere alle risorse web del sistema che le espone.
Questa architettura attraverso l'utilizzo del protocollo \glo{stateless} e di insiemi di operazioni standard, mira a garantire ottime performance, essere affidabile e scalabile senza dover necessitare di modificare tutto il sistema nel caso di cambiamenti a qualche sua componente.
L'architettura REST viene utilizzata da \textbf{ADCrm\textbf{}} per recuperare ed esporre a sua volta le risorse presenti sul CRM.
Concretamente sarà presente quindi un microservizio per ogni CRM che si vorrà collegare all'applicazione.

\subsection{DTO \& DAO}
Il DTO (\textit{Data Transfer Object}) e DAO (\textit{Data Access Object}) sono due design pattern architetturali spesso usati in congiunzione.\\
La loro funzione principale è quella di disaccoppiare il \textit{data layer} (la parte in cui risiedono i dati) dalla parte di \textit{business logic} (ciò che rappresenta la logica applicativa) dell'applicazione, aumentando cosi la separazione tra le varie componenti e quindi la loro modularità e manutenibilità.\\
Le classi di oggetti DTO al loro interno avranno solamente campi dati accedibili attraverso metodi \textit{getter} e \textit{setter}, mentre gli oggetti DAO implementeranno i metodi, utilizzati dalla \textit{business logic}, per accedere ai dati dell'applicazione utilizzando quindi i sopracitati \textit{Data Transfer Object}.

\subsection{Factory Method}
Questo design pattern creazionale, nell'ambito della programmazione orientata agli oggetti, permette di affrontare il problema della creazione di oggetti senza specificarne a priori l'esatta classe di appartenenza.
Il pattern fornisce un interfaccia per la creazione di un oggetto, ma lascia alle classi che la implementano la decisione di quale oggetto istanziare.\\

\begin{figure}[H]
	\centering
	\includegraphics[width=\linewidth]{images/abstract_factory_structure}
	\caption{Schema UML d'esempio per il Factory design pattern}
	\label{fig:abstractfactorystructure}
\end{figure}

In questo modo l'applicazione ADCrm non solo non ha bisogno di sapere a priori se deve costruire oggetti per \textit{Salesforce} o altri CRM, ma ha anche la possibilità di aver collegarsi a più applicazioni CRM contemporaneamente.


\input{architecturalDesign.tex}


\chapter{Verifica e validazione}\label{verifica_validazione}

\chapter{Conclusioni}\label{conclusioni}

%**************************************************************
% Glossary and bibliography
%**************************************************************
\printglossaries
\bibliographystyle{unsrt}
%\bibliography{thesis}


%**************************************************************
% Ringraziamenti
%**************************************************************

%\chapter*{Thanksgivings}
%rr 

%\noindent\textit{\myLocation, \myTime}
%\hfill \myName
%\endgroup
\end{document}